{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/Sreeram-ganesan/jaunt-data-scout/schemas/frontier.web.json",
  "title": "Web Frontier Message",
  "description": "Schema for web frontier messages used in the data scout pipeline",
  "type": "object",
  "required": ["type", "city", "source_url", "source_name", "source_type", "crawl_depth", "correlation_id"],
  "properties": {
    "type": {
      "type": "string",
      "const": "web",
      "description": "Message type identifier"
    },
    "city": {
      "type": "string",
      "description": "Target city for data collection",
      "minLength": 1
    },
    "source_url": {
      "type": "string",
      "description": "URL of the web source to process"
    },
    "source_name": {
      "type": "string",
      "description": "Human-readable name of the source",
      "minLength": 1
    },
    "source_type": {
      "type": "string",
      "enum": ["html", "api", "json", "xml", "csv", "pdf"],
      "description": "Type of content expected at the source URL"
    },
    "crawl_depth": {
      "type": "integer",
      "minimum": 0,
      "maximum": 5,
      "description": "Maximum depth to crawl from the source URL"
    },
    "correlation_id": {
      "type": "string",
      "pattern": "^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$",
      "description": "UUID for tracking requests across the pipeline"
    },
    "trust_score": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 1.0,
      "description": "Optional trust score for the source (0.0 to 1.0)"
    },
    "coordinates_confidence": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 1.0,
      "description": "Optional confidence score for coordinate accuracy"
    },
    "priority": {
      "type": "string",
      "enum": ["low", "medium", "high"],
      "default": "medium",
      "description": "Processing priority for this message"
    },
    "timeout_seconds": {
      "type": "integer",
      "minimum": 10,
      "maximum": 3600,
      "default": 300,
      "description": "Timeout for processing this message"
    },
    "metadata": {
      "type": "object",
      "description": "Additional metadata for the web source",
      "properties": {
        "domain_authority": {
          "type": "string",
          "enum": ["gov", "edu", "org", "com", "unknown"]
        },
        "last_updated": {
          "type": "string"
        },
        "content_type_hint": {
          "type": "string"
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}